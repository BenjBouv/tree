<!doctype html>
<meta charset=utf-8>
<title>Our Awesome Code Editor</title>

<link rel=stylesheet href=/cm/codemirror.css>
<link rel=stylesheet href=/cm/default.css>

<script src=/js/diff_match_patch.js></script>
<script src=/js/scout.js></script>
<script src=/js/plugger.js></script>
<script src=/cm/codemirror.js></script>
<script src=/cm/codemirror.plug.js></script>

<script src=/cm/css.js></script>
<script src=/cm/htmlmixed.js></script>
<script src=/cm/javascript.js></script>
<script src=/cm/xml.js></script>

<style>
  html body { margin: 0px; padding: 0px; width: 100%; height: 100%; position: absolute; }
  iframe body { margin: 0px; padding: 0px; }
  iframe { height: 100%; width: 49%; border: none; }
  .right { float: right; }
</style>

<body>

  <iframe id=preview class=right></iframe>
  
  <script>
  
    var delay;
  
    // Create a CodeMirror2 html editor.
    editor = CodeMirrorPlug(document.body, {
      value: window.client.lastcopy,
      height: "100%",
      width: "50%",
      mode: "text/html",
      tabMode: "indent"
    }, function updatedisplay() {
      clearTimeout(delay);
      delay = setTimeout(updatePreview, 300);
    });

    
    // Regularily inject the code into an iframe for preview.
    function updatePreview() {
      var preview = document.getElementById('preview').contentDocument;
      preview.open();
      preview.write(editor.getValue());
      preview.close();
    }
    setTimeout(updatePreview, 300);
    
  </script>
  
  
</body>
