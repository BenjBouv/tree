<!doctype html>
<meta charset=utf-8>
<title>Our Awesome Code Editor</title>

<link rel=stylesheet href=/cm/lib/codemirror.css>
<link rel=stylesheet href=/cm/theme/default.css>

<script src=/js/diff_match_patch.js></script>
<script src=/js/scout.js></script>
<script src=/js/plugger.js></script>
<script src=/cm/lib/codemirror.js></script>
<script src=/cm/codemirror.plug.js></script>

{{# lang = `ls /cm/mode/` = (for now)
clike clojure coffeescript css diff haskell javascript jinja2 lua markdown
ntriples pascal php plsql python r rst ruby scheme smalltalk sparql stex
velocity xml xmlpure yaml htmlmixed}}

{{? lang == "htmlmixed" |
<script src=/cm/mode/css/css.js></script>
<script src=/cm/mode/javascript/javascript.js></script>
<script src=/cm/mode/xml/xml.js></script>
}}
<script src=/cm/mode/{{=lang|xmlattr}}/{{=lang|xmlattr}}.js></script>

<style>
  html body { margin: 0px; padding: 0px; width: 100%; height: 100%; position: absolute; }
  .CodeMirror-scroll {
    height: 100%;
  }
</style>

<body>
  <script>
  
    // Create a CodeMirror2 editor.
    editor = CodeMirrorPlug(document.body, {
      value: "{{=content|jsonstring}}",
      mode: "{{=mime|jsonstring}}",
      tabMode: "shift"
    });

  </script>
</body>
